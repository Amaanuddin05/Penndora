<div class="container">
  <div class="row mt-4">
    <div class="col-lg-8 offset-lg-2">
      <div class="mb-3">
        <a routerLink="/myblogs" class="back-link">
          <i class="fas fa-arrow-left"></i> Back to My Blogs
        </a>
      </div>
      
      <!-- Loading spinner -->
      <div class="text-center my-5" *ngIf="isLoading">
        <div class="spinner-border" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
        <p class="loading-text">Loading post...</p>
      </div>
      
      <!-- Post content when loaded -->
      <div *ngIf="!isLoading && post">
        <!-- Post card with Twitter-style layout -->
        <div class="post-card">
          <!-- Post header with author info -->
          <div class="post-header" *ngIf="author">
            <div class="author-photo">
              <img [src]="authorPhoto" alt="Author photo" class="avatar">
            </div>
            <div class="author-info">
              <div class="author-name">{{ authorName }}</div>
              <div class="post-date">{{ postDate }}</div>
            </div>
            
            <!-- Summarize Button -->
            <div class="ms-auto">
              <button class="btn btn-outline-primary rounded-pill summarize-btn" (click)="summarizeContent()">
                <i class="fas fa-robot me-1"></i> AI Summary
              </button>
            </div>
          </div>
          
          <!-- Post content -->
          <div class="post-body">
            <h1 class="post-title">{{ post.title }}</h1>
            <div class="post-content" [innerHTML]="post.content"></div>
          </div>
        </div>
        
        <!-- Comments section -->
        <div class="comments-section mt-4">
          <app-comments [postId]="postId"></app-comments>
        </div>
        
        <!-- Summary Modal -->
        <div class="summary-modal" *ngIf="showSummaryModal">
          <div class="summary-modal-content">
            <div class="summary-header">
              <h4>AI-Generated Summary</h4>
              <button class="close-btn" (click)="closeSummaryModal()">Ã—</button>
            </div>
            <div class="summary-body">
              <div *ngIf="isGeneratingSummary" class="text-center py-4">
                <div class="spinner-border spinner-border-sm" role="status">
                  <span class="visually-hidden">Loading...</span>
                </div>
                <p class="mt-2 mb-0">Generating summary...</p>
              </div>
              <div *ngIf="!isGeneratingSummary" [innerHTML]="summaryText"></div>
            </div>
            <div class="summary-footer">
              <small class="text-muted">Generated using AI. Results may vary.</small>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Error message if post not found -->
      <div class="alert alert-warning text-center" *ngIf="!isLoading && !post">
        <i class="fas fa-exclamation-circle me-2"></i>
        Post not found or has been deleted.
      </div>
    </div>
  </div>
</div>
